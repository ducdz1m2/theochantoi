---
layout: default
title: Trang chủ
pagination:
  enabled: true
  per_page: 5
---

<h1 class="page-title">Bài viết mới nhất</h1>

<div class="search-bar">
  <input type="text" id="searchInput" placeholder="Tìm kiếm bài viết...">
  <select id="categoryFilter">
    <option value="">Tất cả danh mục</option>
    <option value="Ruby on Rails">Ruby on Rails</option>
    <option value="Tiếng Nhật">Tiếng Nhật</option>
    <option value="Khác">Khác</option>
  </select>
</div>

<ul id="postList" class="post-list">
  {% for post in paginator.posts %}
  <li class="post-item" data-title="{{ post.title | downcase }}" data-categories="{{ post.categories | join:',' }}">
    <a href="{{ post.url | relative_url }}" class="thumb">
      {% if post.image %}
        <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
      {% else %}
        <img src="assets/images/posts/default.png" alt="{{ post.title }}">
      {% endif %}
    </a>
    <div>
      <a href="{{ post.url | relative_url }}" class="post-title">{{ post.title }}</a><br>
      <time class="timeago post-date" datetime="{{ post.date | date_to_xmlschema }}">
        {{ post.date | date: "%Y-%m-%d %H:%M" }}
      </time>
    </div>
  </li>
  {% endfor %}
</ul>

<div class="pagination">
  {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path | relative_url }}">← Trang trước</a>
  {% endif %}
  <span>Trang {{ paginator.page }} / {{ paginator.total_pages }}</span>
  {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path | relative_url }}">Trang sau →</a>
  {% endif %}
</div>

<hr>

<h2>Danh mục bài viết</h2>

<!-- Tab buttons -->
<div class="search-bar">
  <button class="tab-btn" data-tab="RubyOnRails">Ruby on Rails</button>
  <button class="tab-btn" data-tab="TiengNhat">Tiếng Nhật</button>
  <button class="tab-btn" data-tab="Khac">Khác</button>
</div>

<!-- Tab contents -->
<div id="RubyOnRails" class="tab-content" style="display:none;">
  {% assign posts_in_cat = site.posts | where_exp:"post","post.categories contains 'Ruby on Rails'" | sort:"date" | reverse %}
  {% for post in posts_in_cat limit:5 %}
    <div class="post-item">
      <a href="{{ post.url | relative_url }}" class="thumb">
        {% if post.image %}
          <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
        {% else %}
          <img src="assets/images/posts/default.png" alt="{{ post.title }}">
        {% endif %}
      </a>
      <div>
        <a href="{{ post.url | relative_url }}" class="post-title">{{ post.title }}</a><br>
        <time class="timeago post-date" datetime="{{ post.date | date_to_xmlschema }}">
          {{ post.date | date: "%Y-%m-%d %H:%M" }}
        </time>
      </div>
    </div>
  {% endfor %}
</div>

<div id="TiengNhat" class="tab-content" style="display:none;">
  {% assign posts_in_cat = site.posts | where_exp:"post","post.categories contains 'Tiếng Nhật'" | sort:"date" | reverse %}
  {% for post in posts_in_cat limit:5 %}
    <div class="post-item">
      <a href="{{ post.url | relative_url }}" class="thumb">
        {% if post.image %}
          <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
        {% else %}
          <img src="assets/images/posts/default.png" alt="{{ post.title }}">
        {% endif %}
      </a>
      <div>
        <a href="{{ post.url | relative_url }}" class="post-title">{{ post.title }}</a><br>
        <time class="timeago post-date" datetime="{{ post.date | date_to_xmlschema }}">
          {{ post.date | date: "%Y-%m-%d %H:%M" }}
        </time>
      </div>
    </div>
  {% endfor %}
</div>

<div id="Khac" class="tab-content" style="display:none;">
  {% assign posts_in_cat = site.posts | where_exp:"post","post.categories contains 'Khác'" | sort:"date" | reverse %}
  {% for post in posts_in_cat limit:5 %}
    <div class="post-item">
      <a href="{{ post.url | relative_url }}" class="thumb">
        {% if post.image %}
          <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
        {% else %}
          <img src="assets/images/posts/default.png" alt="{{ post.title }}">
        {% endif %}
      </a>
      <div>
        <a href="{{ post.url | relative_url }}" class="post-title">{{ post.title }}</a><br>
        <time class="timeago post-date" datetime="{{ post.date | date_to_xmlschema }}">
          {{ post.date | date: "%Y-%m-%d %H:%M" }}
        </time>
      </div>
    </div>
  {% endfor %}
</div>

<!-- JS Tab -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const tabs = document.querySelectorAll(".tab-btn");
  tabs.forEach(btn => {
    btn.addEventListener("click", function() {
      const tabName = this.getAttribute("data-tab");
      document.querySelectorAll(".tab-content").forEach(tc => tc.style.display = "none");
      document.querySelectorAll(".tab-btn").forEach(tb => tb.classList.remove("active"));
      document.getElementById(tabName).style.display = "block";
      this.classList.add("active");
    });
  });
  // Mặc định mở tab đầu tiên
  tabs[0].click();
});
</script>

<!-- JS Timeago -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.2/timeago.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  timeago.render(document.querySelectorAll('.timeago'), 'vi');
});

// Search + Filter
document.addEventListener("DOMContentLoaded", function() {
  const searchInput = document.getElementById('searchInput');
  const categoryFilter = document.getElementById('categoryFilter');
  const posts = document.querySelectorAll('.post-item');

  function filterPosts() {
    const keyword = searchInput.value.toLowerCase();
    const category = categoryFilter.value;

    posts.forEach(post => {
      const title = post.getAttribute('data-title');
      const categories = post.getAttribute('data-categories');
      const matchKeyword = title.includes(keyword);
      const matchCategory = category === "" || categories.includes(category);
      post.style.display = (matchKeyword && matchCategory) ? "flex" : "none";
    });
  }

  searchInput.addEventListener('input', filterPosts);
  categoryFilter.addEventListener('change', filterPosts);
});
</script>
