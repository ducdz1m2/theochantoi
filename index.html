---
layout: default
title: Trang chủ
pagination:
  enabled: true
  per_page: 5
---

<h1 style="text-align:center; margin-bottom:40px;">Bài viết mới nhất</h1>
<div style="text-align:center; margin-bottom:40px;">
  <input type="text" id="searchInput" placeholder="Tìm kiếm bài viết..." style="padding:8px 12px; width:300px; border-radius:5px; border:1px solid #ccc;">
  <select id="categoryFilter" style="padding:8px 12px; border-radius:5px; border:1px solid #ccc; margin-left:10px;">
    <option value="">Tất cả danh mục</option>
    <option value="Ruby on Rails">Ruby on Rails</option>
    <option value="Tiếng Nhật">Tiếng Nhật</option>
    <option value="Khác">Khác</option>
  </select>
</div>

<ul id="postList" style="list-style:none; padding:0;">
  {% for post in paginator.posts %}
  <li class="post-item" data-title="{{ post.title | downcase }}"  data-categories="{{ post.categories | join:',' }}" style="display:flex; align-items:flex-start; margin-bottom:30px; border-bottom:1px solid #eee; padding-bottom:20px;">
    {% if post.image %}
      <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:20px;">
        <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" style="width:150px; height:100px; object-fit:cover; border-radius:8px;">
      </a>
    {% else %}
      <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:20px;">
        <img src="assets/images/posts/default.png" alt="{{ post.title }}" style="width:150px; height:100px; object-fit:cover; border-radius:8px;">
      </a>
    {% endif %}
    <div>
      <a href="{{ post.url | relative_url }}" style="font-size:1.2rem; font-weight:bold; text-decoration:none; color:#333;">
        {{ post.title }}
      </a>
      <br>
      <time class="timeago" datetime="{{ post.date | date_to_xmlschema }}" style="color:#888; font-size:0.9rem;">
        {{ post.date | date: "%Y-%m-%d %H:%M" }}
      </time>
    </div>
  </li>
  {% endfor %}
</ul>


<div class="pagination" style="text-align:center; margin-top:40px;">
  {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path | relative_url }}" style="margin-right:10px;">← Trang trước</a>
  {% endif %}
  <span>Trang {{ paginator.page }} / {{ paginator.total_pages }}</span>
  {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path | relative_url }}" style="margin-left:10px;">Trang sau →</a>
  {% endif %}
</div>

<hr style="margin:50px 0; border:none; border-top:1px solid #ccc;">

<h2 style="text-align:center; margin-bottom:20px;">Danh mục bài viết</h2>

<!-- Tab buttons -->
<div style="text-align:center; margin-bottom:30px;">
  <button class="tab-btn" data-tab="RubyOnRails">Ruby on Rails</button>
  <button class="tab-btn" data-tab="TiengNhat">Tiếng Nhật</button>
  <button class="tab-btn" data-tab="Khac">Khác</button>
</div>

<!-- Tab contents -->
<div id="RubyOnRails" class="tab-content" style="display:none; padding:0 20px;">
  {% assign posts_in_cat = site.posts | where_exp:"post","post.categories contains 'Ruby on Rails'" | sort:"date" | reverse %}
  {% for post in posts_in_cat limit:5 %}
    <div style="display:flex; align-items:flex-start; margin-bottom:15px;">
      {% if post.image %}
        <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:10px;">
          <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" style="width:80px; height:60px; object-fit:cover; border-radius:5px;">
        </a>
      {% else %}
        <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:10px;">
          <img src="assets/images/posts/default.png" alt="{{ post.title }}" style="width:80px; height:60px; object-fit:cover; border-radius:5px;">
        </a>
      {% endif %}
      <div>
        <a href="{{ post.url | relative_url }}" style="font-weight:bold; color:#007acc; text-decoration:none;">
          {{ post.title }}
        </a>
        <br>
        <time class="timeago" datetime="{{ post.date | date_to_xmlschema }}" style="color:#888; font-size:0.8rem;">
          {{ post.date | date: "%Y-%m-%d %H:%M" }}
        </time>
      </div>
    </div>
  {% endfor %}
</div>

<div id="TiengNhat" class="tab-content" style="display:none; padding:0 20px;">
  {% assign posts_in_cat = site.posts | where_exp:"post","post.categories contains 'Tiếng Nhật'" | sort:"date" | reverse %}
  {% for post in posts_in_cat limit:5 %}
    <div style="display:flex; align-items:flex-start; margin-bottom:15px;">
      {% if post.image %}
        <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:10px;">
          <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" style="width:80px; height:60px; object-fit:cover; border-radius:5px;">
        </a>
      {% else %}
        <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:10px;">
          <img src="assets/images/posts/default.png" alt="{{ post.title }}" style="width:80px; height:60px; object-fit:cover; border-radius:5px;">
        </a>
      {% endif %}
      <div>
        <a href="{{ post.url | relative_url }}" style="font-weight:bold; color:#007acc; text-decoration:none;">
          {{ post.title }}
        </a>
        <br>
        <time class="timeago" datetime="{{ post.date | date_to_xmlschema }}" style="color:#888; font-size:0.8rem;">
          {{ post.date | date: "%Y-%m-%d %H:%M" }}
        </time>
      </div>
    </div>
  {% endfor %}
</div>

<div id="Khac" class="tab-content" style="display:none; padding:0 20px;">
  {% assign posts_in_cat = site.posts | where_exp:"post","post.categories contains 'Khác'" | sort:"date" | reverse %}
  {% for post in posts_in_cat limit:5 %}
    <div style="display:flex; align-items:flex-start; margin-bottom:15px;">
      {% if post.image %}
        <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:10px;">
          <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" style="width:80px; height:60px; object-fit:cover; border-radius:5px;">
        </a>
      {% else %}
        <a href="{{ post.url | relative_url }}" style="flex-shrink:0; margin-right:10px;">
          <img src="assets/images/posts/default.png" alt="{{ post.title }}" style="width:80px; height:60px; object-fit:cover; border-radius:5px;">
        </a>
      {% endif %}
      <div>
        <a href="{{ post.url | relative_url }}" style="font-weight:bold; color:#007acc; text-decoration:none;">
          {{ post.title }}
        </a>
        <br>
        <time class="timeago" datetime="{{ post.date | date_to_xmlschema }}" style="color:#888; font-size:0.8rem;">
          {{ post.date | date: "%Y-%m-%d %H:%M" }}
        </time>
      </div>
    </div>
  {% endfor %}
</div>

<style>
.tab-btn {
  background-color: #f0f0f0;
  border: 1px solid #ccc;
  padding: 8px 16px;
  margin: 0 4px;
  cursor: pointer;
  border-radius: 5px;
  transition: background 0.3s;
}
.tab-btn:hover {
  background-color: #ddd;
}
.tab-btn.active {
  background-color: #007acc;
  color: white;
  border-color: #007acc;
}
</style>

<script>
// JS Tab: không cần event truyền, lấy data-tab
document.addEventListener("DOMContentLoaded", function() {
  const tabs = document.querySelectorAll(".tab-btn");
  tabs.forEach(btn => {
    btn.addEventListener("click", function() {
      const tabName = this.getAttribute("data-tab");
      document.querySelectorAll(".tab-content").forEach(tc => tc.style.display = "none");
      document.querySelectorAll(".tab-btn").forEach(tb => tb.classList.remove("active"));
      document.getElementById(tabName).style.display = "block";
      this.classList.add("active");
    });
  });
  // Mặc định mở tab đầu tiên
  tabs[0].click();
});
</script>

<!-- JS Timeago -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.2/timeago.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  timeago.render(document.querySelectorAll('.timeago'), 'vi');
});


document.addEventListener("DOMContentLoaded", function() {
  const searchInput = document.getElementById('searchInput');
  const categoryFilter = document.getElementById('categoryFilter');
  const posts = document.querySelectorAll('.post-item'); // tất cả bài viết

  function filterPosts() {
    const keyword = searchInput.value.toLowerCase();
    const category = categoryFilter.value;

    posts.forEach(post => {
      const title = post.getAttribute('data-title');
      const categories = post.getAttribute('data-categories');

      const matchKeyword = title.includes(keyword);
      const matchCategory = category === "" || categories.includes(category);

      post.style.display = (matchKeyword && matchCategory) ? "flex" : "none";
    });
  }

  searchInput.addEventListener('input', filterPosts);
  categoryFilter.addEventListener('change', filterPosts);
});
</script>
